---
title: 浏览器从请求发出到返回经历了什么
description: <blockquote class="blockquote-center"></blockquote>
date: 2017-03-22 11:11:07
tags:
categories:
keywords:
---

## 一个最简单的http请求，没有代理，ipv4和以下任何步骤都没有问题的情况下：
1. 浏览器检查缓存，如果请求的对象在缓存中并且是新的，跳到步骤9。
2. 浏览器从OS获取服务器的ip地址。
3. OS进行DNS查找，并将IP地址返回给浏览器。
4. 浏览器打开到服务器的TCP连接（如果是https则步骤更复杂点,后面再分析）。
5. 浏览器通过TCP连接发送HTTP请求。
6. 浏览器接受http响应，并可能关闭TCP连接或将其重新用于另一个请求。
7. 浏览器检查响应是重定向还是条件响应（3xx的状态码）,授权请求（401），错误（4xx或5xx）等。这些与正常响应（2xx）的处理方式不同。
8. 如果允许缓存，响应将存储在缓存中。
9. 浏览器解码响应（比如响应是gzip的需要解压缩）
10. 浏览器决定如何处理响应（它可能是一个HTML页面，可能是一张图片，也可能是一个声音片段）。
11. 浏览器渲染响应，或者提示无法识别的类型弹出框警告。
12. 